/*! angular-stripe-js 2013-11-05 */
angular.module("vr.StripeJS",["vr.StripeJS.directives","vr.StripeJS.filters"]),angular.module("vr.StripeJS.filters",["vr.StripeJS.filters.validation","vr.StripeJS.filters.cardType"]),angular.module("vr.StripeJS.directives",["vr.StripeJS.directives.class","vr.StripeJS.directives.validation"]),angular.module("vr.StripeJS.service",[]).value("publishableKey","").run(["publishableKey",function(a){Stripe.setPublishableKey(a)}]).factory("StripeJS",function(){return{createToken:Stripe.card.createToken,validateCardNumber:Stripe.card.validateCardNumber,validateExpiry:Stripe.card.validateExpiry,validateCVC:Stripe.card.validateCVC,cardType:Stripe.card.cardType}}),angular.module("vr.StripeJS.directives.validation",["vr.StripeJS.directives.validation.number","vr.StripeJS.directives.validation.cvc","vr.StripeJS.directives.validation.expiration"]),angular.module("vr.StripeJS.directives.class",["vr.StripeJS.filters.cardType"]).directive("stripeClass",["$filter",function(a){return{restrict:"A",link:function(b,c,d){function e(b){var c=a("cardType")(b).toLowerCase();switch(c){case"american express":c="amex";break;case"mastercard":c="mc";break;case"diners club":c="diners"}return c}function f(a){""!=g&&c.removeClass(g),g="stripe-"+e(a),c.addClass(g)}var g="";b.$watch(function(){return b.$eval(d.ngModel)},function(a){f(a)})}}}]),angular.module("vr.StripeJS.directives.validation.cvc",["vr.StripeJS.filters.validation.cvc"]).directive("validateCvc",["$filter",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(b){var c=a("validCVC")(b);return e.$setValidity("cardCVC",c),c?b:void 0}),e.$formatters.unshift(function(b){return e.$setValidity("cardCVC",a("validCVC")(b)),b})}}}]),angular.module("vr.StripeJS.directives.validation.expiration",["vr.StripeJS.directives.validation.expiration.month","vr.StripeJS.directives.validation.expiration.year"]),angular.module("vr.StripeJS.directives.validation.expiration.service",[]).factory("stripeExpiration",function(){return{month:0,year:0}}),angular.module("vr.StripeJS.directives.validation.expiration.month",["vr.StripeJS.filters.validation.expiration","vr.StripeJS.directives.validation.expiration.service"]).directive("validateExpMonth",["$filter","stripeExpiration",function(a,b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){function g(c){b.month=c;var d=a("validExpiry")({month:c,year:b.year});return f.$setValidity("cardExpirationMonth",d),d}f.$parsers.unshift(function(a){return g(a)?a:void 0}),f.$formatters.unshift(function(a){return g(a),a}),c.$watch(function(){return b.year},function(){f.$setViewValue(b.month)})}}}]),angular.module("vr.StripeJS.directives.validation.expiration.year",["vr.StripeJS.filters.validation.expiration","vr.StripeJS.directives.validation.expiration.service"]).directive("validateExpYear",["$filter","stripeExpiration",function(a,b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){function g(c){b.year=c;var d=a("validExpiry")({month:b.month,year:c});return f.$setValidity("cardExpirationYear",d),d}f.$parsers.unshift(function(a){return g(a)?a:void 0}),f.$formatters.unshift(function(a){return g(a),a}),c.$watch(function(){return b.month},function(){f.$setViewValue(b.year)})}}}]),angular.module("vr.StripeJS.directives.validation.number",["vr.StripeJS.filters.validation.number"]).directive("validateNumber",["$filter",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){e.$parsers.unshift(function(b){var c=a("validCardNumber")(b);return e.$setValidity("cardNumber",c),c?b:void 0}),e.$formatters.unshift(function(b){return e.$setValidity("cardNumber",a("validCardNumber")(b)),b})}}}]),angular.module("vr.StripeJS.filters.validation",["vr.StripeJS.filters.validation.number","vr.StripeJS.filters.validation.cvc","vr.StripeJS.filters.validation.expiration"]),angular.module("vr.StripeJS.filters.cardType",["vr.StripeJS.service"]).filter("cardType",["StripeJS",function(a){return function(b){return a.cardType(b)}}]),angular.module("vr.StripeJS.filters.validation.cvc",["vr.StripeJS.service"]).filter("validCVC",["StripeJS",function(a){return function(b){return a.validateCVC(b)}}]),angular.module("vr.StripeJS.filters.validation.expiration",["vr.StripeJS.service"]).filter("validExpiry",["StripeJS",function(a){return function(b){var c=0,d=0;if(angular.isArray(b))c=parseInt(b[0]),d=parseInt(b[1]);else if(angular.isObject(b))c=parseInt(b.month),d=parseInt(b.year);else if(angular.isString(b)){var e=[];e=b.indexOf("-")>0?b.split("-"):b.indexOf("/")>0?b.split("/"):[b.substr(0,2),b.substr(2)],c=parseInt(e[0]),d=parseInt(e[1])}else angular.isNumber(b)&&(b>9999?(c=Math.floor(b/1e4),d=b-1e4*c):(c=Math.floor(b/100),d=b-100*c));return 100>d&&(d+=2e3),a.validateExpiry(c,d)}}]),angular.module("vr.StripeJS.filters.validation.number",["vr.StripeJS.service"]).filter("validCardNumber",["StripeJS",function(a){return function(b){return a.validateCardNumber(b)}}]);